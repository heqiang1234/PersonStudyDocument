##1、PUT方法底层源码解析

# HashMap

## 1、PUT方法底层源码解析

先进行hash(key)操作，获取到hash值，

1.判断数组是否为空，如果为空，初始化一个tab数组

2.判断数组的hash值index位置是否为空，如果为空，初始化一个node节点

3.判断第一个节点，也就是数组里面的那个节点的key是否相等，如果相等，直接替换。

4.遍历该位置下面的链表，挨个进行比对，如果有key相等的，那么就替换，如果到链表末尾还没有一样的，那就new一个新的node插入到链表的末尾

5.这里在进行插入新节点的处理中，先插入new的新节点，然后判断链表是否需要转换为红黑树

## 2、GET方法底层源码解析

## 3、链表扩容底层源码解析

**1.7** 里面，扩容是new一个新的长度为两倍的数组，然后将原数组的值转移到新数组。

 

## 4、红黑树扩容底层源码解析

## 5、链表转红黑树底层源码解析





初始容量  16   扩容也是2的倍数，如果自己初始化容量，会进行转换，转换为最近的2的倍数。

hash(key) -->   (h = key.hashCode()) ^ (h >>> 16)

计算数组上链表的位置index算法  （n -1） & hash  == index



转换为红黑树的条件   某个位置的上的链表长度 >=8,且数组长度 >=64

链表转为红黑树，主要考虑到查询，插入的效率






